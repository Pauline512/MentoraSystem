{% extends "base.html" %} <!-- This assumes the project has a base.html file -->

{% block title %}Resource Library{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold text-gray-800">Resource Library</h1>
    
    <!-- FR20: Only show the "Upload" button to Mentors and Admins -->
    {% if user.role == 'MENTOR' or user.role == 'ADMIN' %}
      <a href="{% url 'resources:upload' %}" class="btn btn-primary">
        <i class="material-icons align-middle me-1">cloud_upload</i> Upload New Resource
      </a>
    {% endif %}
  </div>

  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    {% if resources %}
      {% for resource in resources %}
        <div class="col">
          <div class="card h-100">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{ resource.title }}</h5>
              <p class="card-text text-muted flex-grow-1">{{ resource.description }}</p>
              <p class="card-text"><small class="text-muted">Uploaded by: {{ resource.uploader.get_full_name|default:resource.uploader.username }} on {{ resource.created_at|date:"F d, Y" }}</small></p>
              <div class="mt-3">
                <!-- FR21: Provide a download or visit link -->
                {% if resource.file %}
                  <a href="{{ resource.file.url }}" class="btn btn-success btn-sm me-2" download>
                    <i class="material-icons align-middle me-1">download</i> Download
                  </a>
                {% elif resource.link %}
                  <a href="{{ resource.link }}" class="btn btn-info btn-sm me-2" target="_blank" rel="noopener noreferrer">
                    <i class="material-icons align-middle me-1">link</i> Visit Link
                  </a>
                {% endif %}
                {% if user == resource.uploader or user.role == 'MENTOR' or user.role == 'ADMIN' %}
                  <a href="{% url 'resources:edit' resource.pk %}" class="btn btn-warning btn-sm">
                    <i class="material-icons align-middle me-1">edit</i> Edit
                  </a>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <div class="col-12">
        <div class="alert alert-info text-center" role="alert">
          No resources have been uploaded yet.
        </div>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
 <!-- This template extends the base.html file and provides a list of resources with upload functionality -->